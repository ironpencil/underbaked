using System.Collections;
using System.Collections.Generic;
using UnityEngine;

[CreateAssetMenu(fileName = "DrownVC", menuName = "VulnerabilityControllers/Drown")]
public class DrownVC : VulnerabilityController
{
	public float drownLifetime;
	private float drownLength;

	public override void Expose(GameObject target, HazardType hazardType)
    {
        if (vulnerabilities.Contains(hazardType)) {
			Debug.Log("Began drowning... " + drownLength);
			Character character = target.GetComponent<Character>();
			drownLength += Time.deltaTime;
			if (drownLength > drownLifetime && character != null) {
				character.Die();
			}
		}
    }

    public override void EndExposure(GameObject target, HazardType hazardType)
    {
        if (vulnerabilities.Contains(hazardType)) {
			drownLength = 0;
		}
    }

    public override void EndExposure()
    {
        drownLength = 0;
    }
}
